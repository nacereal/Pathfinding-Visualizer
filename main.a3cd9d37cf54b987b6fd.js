(()=>{"use strict";var t,e,i,n,o={225:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var n=i(208),o=i(413),s=i(925),l=i(361),a=i(671),r=i(956),c=i(899),h=i(297),u=i(847),d=i(977),g=i(299),p=t([a,r]);[a,r]=p.then?(await p)():p,await n.Z.waitUntilLoad();const Z=document.getElementById("canvas");l.Z.canvas=Z,l.Z.ctx=Z.getContext("2d");let T=Z.offsetWidth,m=Z.offsetHeight;Z.width=T,Z.height=m;let f=new Image,w=new Image,S=new Image;f.src=u,w.src=d,S.src=g,l.Z.width=T,l.Z.height=m,l.Z.TILE_SIZE=48,l.Z.TIME_SIZE_WITH_BORDER=l.Z.TILE_SIZE+2,l.Z.ICON_SIZE=30,l.Z.ICON_CORNER_OFFSET=Math.floor((l.Z.TILE_SIZE-l.Z.ICON_SIZE)/2),l.Z.CANVAS_SIZE=new s.Z(T,m).scale(1.5),l.Z.MAX_OFFSET=new s.Z((l.Z.CANVAS_SIZE.getX()-T)/2,(l.Z.CANVAS_SIZE.getY()-m)/2),l.Z.startingTilePosition=new s.Z(-1,-1),l.Z.goalTilePosition=new s.Z(-1,-1),l.Z.centerOffset=new s.Z(0,0),l.Z.currentMousePosition=new s.Z(-T,-m),l.Z.SCREEN_CENTER=new s.Z(Math.floor(T/2),Math.floor(m/2)),l.Z.isMouseInViewport=!1;const E=new a.Z(l.Z.CANVAS_SIZE.X,l.Z.CANVAS_SIZE.Y);l.Z.virtualCanvas=E;const C=new r.Z;let I={};I.resetPreviousStartTile=()=>{if(E.isTileCoordinatesOnGrid(l.Z.startingTilePosition.X,l.Z.startingTilePosition.Y)){console.log("resetting previous start tile"),E.resetTileColor(l.Z.startingTilePosition.X,l.Z.startingTilePosition.Y);let t=E.getTile(l.Z.startingTilePosition.X,l.Z.startingTilePosition.Y);t.removeIcon(),t.type="blank",l.Z.startingTilePosition.X=-1,l.Z.startingTilePosition.Y=-1}else console.log("attempted start tile reset: failed tho")},I.resetPreviousGoalTile=()=>{if(E.isTileCoordinatesOnGrid(l.Z.goalTilePosition.X,l.Z.goalTilePosition.Y)){E.resetTileColor(l.Z.goalTilePosition.X,l.Z.goalTilePosition.Y);let t=E.getTile(l.Z.goalTilePosition.X,l.Z.goalTilePosition.Y);t.removeIcon(),t.type="blank",l.Z.goalTilePosition.X=-1,l.Z.goalTilePosition.Y=-1}},I.canPlaceOnTile=(t,e)=>E.isTileCoordinatesOnGrid(t,e)&&"blank"===E.getTile(t,e).type,I.hasPressedLMB=t=>t.button==b,I.hasPressedRMB=t=>t.button==B,I.hasPressedMMB=t=>t.button==y;const b=0,y=1,B=2;new o.Z(80,80,255);let v=!1,k=!1;function _(){let t=!1,e=new s.Z,i=new s.Z;document.onmousedown=n=>{I.hasPressedLMB(n)?(v=!0,l.Z.isHoldingLMB=!0):I.hasPressedRMB(n)&&(k=!0,l.Z.isHoldingRMB=!0),C.handleMouseInput(n,"mousedown");let o=new s.Z(n.clientX,n.clientY);document.elementFromPoint(o.X,o.Y),I.hasPressedMMB(n)&&!t&&(t=!0,document.body.style.cursor="grabbing",e=new s.Z(n.clientX,n.clientY),i=new s.Z(n.clientX,n.clientY))},document.onmouseup=e=>{I.hasPressedLMB(e)?(v=!1,l.Z.isHoldingLMB=!1):I.hasPressedRMB(e)&&(k=!1,l.Z.isHoldingRMB=!1),I.hasPressedMMB(e)&&t&&(t=!1,document.body.style.cursor="default"),C.handleMouseInput(e,"mouseup")},document.onmousemove=e=>{if(l.Z.currentMousePosition.X=e.clientX,l.Z.currentMousePosition.Y=e.clientY,new s.Z(e.clientX,e.clientY),document.elementFromPoint(e.clientX,e.clientY),t){let t=new s.Z(e.clientX,e.clientY),n=t.sub(i);if(Math.abs(l.Z.centerOffset.X)<=l.Z.MAX_OFFSET.X){let t=l.Z.centerOffset.X+n.X;t=Math.sign(t)*Math.min(Math.abs(t),l.Z.MAX_OFFSET.X),l.Z.centerOffset.X=t}if(Math.abs(l.Z.centerOffset.Y)<=l.Z.MAX_OFFSET.Y){let t=l.Z.centerOffset.Y+n.Y;t=Math.sign(t)*Math.min(Math.abs(t),l.Z.MAX_OFFSET.Y),l.Z.centerOffset.Y=t}i=t}C.handleMouseInput(e,"mousemove")},document.onmouseenter=t=>{l.Z.isMouseInViewport=!0},document.onmouseleave=t=>{l.Z.isMouseInViewport=!1}}function X(){l.Z.ctx.clearRect(0,0,T,m),E.draw(),C.frameUpdate(),l.Z.drawGridToCenterVector(),l.Z.drawCenterReference()}function Y(){document.addEventListener("contextmenu",(t=>t.preventDefault()));let t=document.getElementById("toolbarOpener"),e=document.getElementById("mainToolbar"),i=!1;t.onclick=()=>{i?(e.classList.remove("closed"),t.children[0].classList.remove("closed"),i=!1):(e.classList.add("closed"),t.children[0].classList.add("closed"),i=!0)},document.getElementById("playButton"),document.getElementById("speedScaleButton"),document.getElementById("skipBackwardButton"),document.getElementById("skipForwardButton"),document.getElementById("markerButton"),document.getElementById("goalButton"),document.getElementById("wallButton"),document.getElementById("weightButton"),document.getElementById("clearButton");let n=document.getElementById("settingsButton"),o=(document.getElementById("infoButton"),document.getElementsByClassName("settings-prompt")[0].querySelector(".close-prompt"));document.body.querySelector(".clear-prompt").querySelector(".close-prompt"),l.Z.buttons.settingsButton.onclick=()=>{C.currentState===r.Z.editingSettingsState?(C.handleButtonInput(n,"click",r.Z.idleState),o.onclick=null):(C.handleButtonInput(n,"click",r.Z.editingSettingsState),o.onclick=()=>{C.handleButtonInput(o,"click",r.Z.idleState),o.onclick=null})},l.Z.buttons.clearButton.onclick=()=>{C.currentState===r.Z.clearState?(C.handleButtonInput(l.Z.buttons.clearButton,"click",r.Z.idleState),l.Z.buttons.clearCloseButton.onclick=null,l.Z.buttons.clearEverythingButton.onclick=null,l.Z.buttons.clearWallsButton.onclick=null):(C.handleButtonInput(l.Z.buttons.clearButton,"click",r.Z.clearState),l.Z.buttons.clearCloseButton.onclick=()=>{C.handleButtonInput(l.Z.buttons.clearCloseButton,"click",r.Z.idleState)},l.Z.buttons.clearEverythingButton.onclick=()=>{C.handleButtonInput(l.Z.buttons.clearEverythingButton,"click",r.Z.idleState)},l.Z.buttons.clearWallsButton.onclick=()=>{C.handleButtonInput(l.Z.buttons.clearWallsButton,"click",r.Z.idleState)})},l.Z.buttons.markerButton.onclick=()=>{C.currentState===r.Z.placingStartingTileState?C.handleButtonInput(l.Z.buttons.markerButton,"click",r.Z.idleState):C.handleButtonInput(l.Z.buttons.markerButton,"click",r.Z.placingStartingTileState)},l.Z.buttons.goalButton.onclick=()=>{C.currentState===r.Z.placingGoalTileState?C.handleButtonInput(l.Z.buttons.goalButton,"click",r.Z.idleState):C.handleButtonInput(l.Z.buttons.goalButton,"click",r.Z.placingGoalTileState)},l.Z.buttons.wallButton.onclick=()=>{C.currentState===r.Z.placingWallsState?C.handleButtonInput(l.Z.buttons.wallButton,"click",r.Z.idleState):C.handleButtonInput(l.Z.buttons.wallButton,"click",r.Z.placingWallsState)},l.Z.buttons.weightButton.onclick=()=>{C.currentState===r.Z.placingWeightTilesState?C.handleButtonInput(l.Z.buttons.weightButton,"click",r.Z.idleState):C.handleButtonInput(l.Z.buttons.weightButton,"click",r.Z.placingWeightTilesState)},l.Z.buttons.speedScaleButton.onclick=()=>{c.Z.cyclePlaybackSpeed(),document.querySelector(".speed-scale-label").innerHTML=c.Z.getPlaybackSpeedLabel()},l.Z.buttons.playButton.onclick=()=>{C.currentState===r.Z.playingState?(console.log("entering idle state"),C.handleButtonInput(l.Z.buttons.playButton,"click",r.Z.idleState)):r.Z.playingState.canEnterState()?(console.log("entering the playing state i guess"),C.handleButtonInput(l.Z.buttons.playButton,"click",r.Z.playingState)):(0==l.Z.isGoalTilePlaced()&&h.Z.addNotification("place the <span style='color:rgb(255,100,100);'>goal tile</span>..."),0==l.Z.isStartingTilePlaced()&&h.Z.addNotification("place the <span style='color:rgb(100,210,100);'>starting tile</span>..."))},_(),setInterval(X,l.Z.FRAME_TIMING),h.Z.addNotification("HELLO!!!")}l.Z.FRAME_TIMING,Y(),e()}catch(P){e(P)}}),1)},891:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{Z:()=>u});var o=i(361),s=i(671),l=i(925),a=i(82),r=i(254),c=t([s]);s=(c.then?(await c)():c)[0],new r.Z(91,166,207,1),new r.Z(209,203,23,1);const h=["weight","goal","start","blank"];class u{grid=null;edgeList=[];isVisited=[];hDistances=[];distances=[];previous=[];hasEdge(t,e){console.assert(this.grid.isTileCoordinatesOnGrid(t,e),`Not on grid: (${t}, ${e})`);let i=this.grid.getTile(t,e).type;for(let t=0;t<h.length;++t)if(i===h[t])return!0;return!1}constructor(t){this.grid=t;const e=o.Z.virtualCanvas.tileGrid.size,i=o.Z.goalTilePosition,n=(o.Z.startingTilePosition,[new l.Z(0,1),new l.Z(1,0),new l.Z(0,-1),new l.Z(-1,0)]);for(let t=0;t<e.Y;++t){this.edgeList[t]=[],this.isVisited[t]=[],this.hDistances[t]=[],this.distances[t]=[],this.previous[t]=[];for(let o=0;o<e.X;++o)if(this.hasEdge(o,t)){this.edgeList[t][o]=[],this.hDistances[t][o]=Math.abs(i.X-o)+Math.abs(i.Y-t),this.distances[t][o]=null,this.previous[t][o]=null,this.isVisited[t][o]=!1;for(let e of n){let i=new l.Z(e.X+o,e.Y+t);this.grid.isTileCoordinatesOnGrid(i.X,i.Y)&&this.hasEdge(i.X,i.Y)&&this.edgeList[t][o].push(new l.Z(e.X+o,e.Y+t))}}else this.isVisited[t][o]=!0,this.previous[t][o]=null,this.distances[t][o]=null,this.edgeList[t][o]=null,this.hDistances[t][o]=null}}createPlaybackTrack(){const t=new a.Z;return this.grid,t}}n()}catch(t){n(t)}}))},49:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{Z:()=>w});var o=i(361),s=i(671),l=i(925),a=i(82),r=i(985),c=i(254),h=t([s]);s=(h.then?(await h)():h)[0];const u=10,d=1,g=new c.Z(91,166,207,1),p=10,Z=new c.Z(209,203,23,1),T=5,m=["weight","goal","start","blank"],f=5;class w{grid=null;edgeList=[];isVisited=[];distances=[];traversed=[];hasEdge(t,e){console.assert(this.grid.isTileCoordinatesOnGrid(t,e));let i=this.grid.getTile(t,e).type;for(let t=0;t<m.length;++t)if(i===m[t])return!0;return!1}calculateCost(t,e){if(this.grid){let i=this.grid.getTile(t.X,t.Y),n=this.grid.getTile(e.X,e.Y);return"weight"===i.type||"weight"===n.type?u:d}console.error("Can't get cost: grid has not been set for dijkstra object")}getCost(t,e){return this.distances[e][t][0]}setCost(t,e,i){this.distances[e][t][0]=i}getPrevious(t,e){return this.distances[e][t][1]}setPrevious(t,e,i){this.distances[e][t][1]=i}getEdges(t,e){return this.edgeList[e][t]}hasVisited(t,e){return this.isVisited[e][t]}visit(t,e){this.isVisited[e][t]=!0}constructor(t){console.assert(t),this.grid=t;const e=[new l.Z(1,0),new l.Z(0,1),new l.Z(-1,0),new l.Z(0,-1)];for(let i=0;i<t.tileGrid.size.Y;++i){this.edgeList[i]=[],this.isVisited[i]=[],this.distances[i]=[],this.traversed[i]=[];for(let n=0;n<t.tileGrid.size.X;++n)if(t.getTile(n,i),this.edgeList[i][n]=[],this.isVisited[i][n]=!1,this.traversed[i][n]=!1,this.distances[i][n]=[null,null],this.hasEdge(n,i))for(let t of e){let e=new l.Z(n+t.X,i+t.Y);this.grid.isTileCoordinatesOnGrid(e.X,e.Y)&&this.hasEdge(e.X,e.Y)&&this.edgeList[i][n].push(e),e=null}else this.isVisited[i][n]=!0}}createPlaybackTrack(){console.log("creating playback track");let t=this.grid,e=new a.Z,i=0;const n=o.Z.startingTilePosition,s=o.Z.goalTilePosition;this.setCost(n.X,n.Y,0),this.setPrevious(n.X,n.Y,null);let c=n,h=!1;for(;!h;){let n=this.getEdges(c.X,c.Y),o=this.getCost(c.X,c.Y);for(let t of n)if(!this.hasVisited(t.X,t.Y)){let n=o+this.calculateCost(c,t),l=this.getCost(t.X,t.Y);if((null===l||l>n)&&(this.setCost(t.X,t.Y,n),this.setPrevious(t.X,t.Y,c),t.equals(s))){h=!0;break}if(!this.traversed[t.Y][t.X]){let n=new r.Z;n.setAnimationTime(p),n.pushTileUpdate([g,t]),++i,i==f&&(n.setEndOfStep(!0),i=0),e.pushUpdate(n),this.traversed[t.Y][t.X]=!0}}if(this.visit(c.X,c.Y),h)break;let a=null,u=new l.Z(-1,-1);for(let e=0;e<t.tileGrid.size.Y;e++)for(let i=0;i<t.tileGrid.size.X;i++)if(!this.hasVisited(i,e)){let t=this.getCost(i,e);if(null===t)continue;(null===a||a>t)&&(a=t,u.X=i,u.Y=e)}if(null===a)break;c=u}console.log("found path i think"),c=s;let u=this.getPrevious(c.X,c.Y);for(;null!==u&&!u.equals(n);){let t=new r.Z;t.setAnimationTime(T),t.pushTileUpdate([Z,u]),e.pushUpdate(t),c=u,u=this.getPrevious(c.X,c.Y)}return e}}n()}catch(t){n(t)}}))},413:(t,e,i)=>{i.d(e,{Z:()=>n});class n{constructor(t,e,i){this._r=t,this._g=e,this._b=i}get R(){return this._r}get G(){return this._g}get B(){return this._b}set R(t){this._r=t}set G(t){this._g=t}set B(t){this._b=t}setRGB(t,e,i){this.R=t,this.G=e,this.B=i}}},82:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(361),o=i(899),s=i(985);class l{constructor(){this.updates=[],this.currentPos=-1,this.currentElapsedTime=0,this.playbackInterval=null,this.grid=null,this.playing=!1,this.finishedPlaying=!1}setGrid(t){this.grid=t}resetGrid(){this.setGrid(null)}playbackUpdate(){let t=this.updates[this.currentPos+1],e=(t.getUpdateCount(),this.currentElapsedTime/t.getAnimationTime());t.drawUpdate(this.grid,e),this.currentElapsedTime+=n.Z.FRAME_TIMING*o.Z.getPlaybackSpeed(),e>1&&(this.currentElapsedTime=0,++this.currentPos,this.currentPos+1>=this.updates.length&&(clearInterval(this.playbackInterval),t.drawUpdate(this.grid,1),this.finishedPlaying=!0,this.playing=!1))}play(){null!==this.grid&&(this.playing=!0,this.currentPos=-1,this.currentElapsedTime=0,0==this.updates.length&&console.warn("There are 0 updates in this track! What are you even playing?!"),console.log("began playback"),this.playbackInterval=setInterval((()=>{this.playbackUpdate()}),n.Z.FRAME_TIMING))}stop(){clearInterval(this.playbackInterval),this.playbackInterval=null,this.playing=!1,this.resetGrid()}pushUpdate(t){console.assert(t instanceof s.Z),this.updates.push(t)}stepForward(){if(null===this.grid||this.currentPos+1>=this.updates.length)return;let t=this.updates[this.currentPos+1];for(;t&&!t.isEndOfStep();)console.log("drew an update in while loop"),t.drawUpdate(this.grid,1),this.currentPos++,t=this.updates[this.currentPos+1];t&&(console.log("drew the end of step update"),t.drawUpdate(this.grid,1),this.currentPos++)}stepBackward(){if(null===this.grid||this.currentPos<0)return;let t=this.updates[this.currentPos];do{t.resetUpdate(this.grid),this.currentPos--,t=this.updates[this.currentPos]}while(t&&!t.isEndOfStep());console.log(this.currentPos)}}},985:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(254),o=i(925);class s{constructor(){this.tileUpdates=[],this.animationTime=0,this.endOfStep=!1}pushTileUpdate(t){console.assert(2==t.length),console.assert(t[0]instanceof n.Z),console.assert(t[1]instanceof o.Z),this.tileUpdates.push(t)}setAnimationTime(t){this.animationTime=t}getAnimationTime(){return this.animationTime}getTileUpdate(t){return this.tileUpdates[t]}getUpdateCount(){return this.tileUpdates.length}setEndOfStep(t){this.endOfStep=t}isEndOfStep(){return this.endOfStep}drawUpdate(t,e){for(let i=0;i<this.tileUpdates.length;++i){const n=this.getTileUpdate(i),o=n[0],s=n[1];let l=o.alpha*e;t.setTileColor(s.X,s.Y,o.color,l)}}resetUpdate(t){for(let e=0;e<this.tileUpdates.length;++e){const i=this.getTileUpdate(e)[1];t.resetTileColor(i.X,i.Y)}}}},671:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{Z:()=>h});var o=i(208),s=i(413),l=i(925),a=i(254),r=i(361);await o.Z.waitUntilLoad();const t=getComputedStyle(document.body).getPropertyValue("--grid-background"),c=getComputedStyle(document.body).getPropertyValue("--grid-line-color");console.log("Loaded grid colors:",t,c);class h{topLeftCorner=new l.Z;topRightCorner=new l.Z;bottomLeftCorner=new l.Z;bottomRightCorner=new l.Z;calcTopLeftCorner(t){console.assert(t instanceof l.Z),this.topLeftCorner.X=r.Z.SCREEN_CENTER.X+Math.floor(t.X)-this.tileGrid.size.X*(r.Z.TILE_SIZE+1)/2,this.topLeftCorner.Y=r.Z.SCREEN_CENTER.Y+Math.floor(t.Y)-this.tileGrid.size.Y*(r.Z.TILE_SIZE+1)/2}calcCorners(t){console.assert(t instanceof l.Z),this.calcTopLeftCorner(t);let e=r.Z.SCREEN_CENTER.add(t);e.X=Math.floor(e.X),e.Y=Math.floor(e.Y),this.topRightCorner.X=e.X+this.tileGrid.size.X*(r.Z.TILE_SIZE+1)/2,this.topRightCorner.Y=e.Y-this.tileGrid.size.Y*(r.Z.TILE_SIZE+1)/2,this.bottomRightCorner.X=e.X+this.tileGrid.size.X*(r.Z.TILE_SIZE+1)/2,this.bottomRightCorner.Y=e.Y+this.tileGrid.size.Y*(r.Z.TILE_SIZE+1)/2,this.bottomLeftCorner.X=e.X-this.tileGrid.size.X*(r.Z.TILE_SIZE+1)/2,this.bottomLeftCorner.Y=e.Y+this.tileGrid.size.Y*(r.Z.TILE_SIZE+1)/2}getScreenCoordinateFromTileCoordinate(t){console.assert(t instanceof l.Z),this.calcTopLeftCorner(r.Z.centerOffset);let e=new l.Z;return e.X=this.topLeftCorner.X+1+t.X*(r.Z.TILE_SIZE+1),e.Y=this.topLeftCorner.Y+1+t.Y*(r.Z.TILE_SIZE+1),e}getTileCoordinateFromScreenCoordinate(t){console.assert(t instanceof l.Z),this.calcTopLeftCorner(r.Z.centerOffset);let e=new l.Z;return e.X=Math.floor((t.X-this.topLeftCorner.X)/(r.Z.TILE_SIZE+1)),e.Y=Math.floor((t.Y-this.topLeftCorner.Y)/(r.Z.TILE_SIZE+1)),e}constructor(t,e){this.canvas={},this.canvas.size=new l.Z(t,e);let i=(this.canvas.size.getX()-1)%(2*r.Z.TILE_SIZE+2),n=(this.canvas.size.getY()-1)%(2*r.Z.TILE_SIZE+2);this.tileGrid={},this.tileGrid.size=new l.Z,this.tileGrid.size.setX((this.canvas.size.getX()-1-i)/(r.Z.TILE_SIZE+1)),this.tileGrid.size.setY((this.canvas.size.getY()-1-n)/(r.Z.TILE_SIZE+1)),console.log(`Tile Grid Size: (${this.tileGrid.size.X}, ${this.tileGrid.size.Y})`),this.tileGrid.grid=[];for(let t=0;t<this.tileGrid.size.Y;++t){this.tileGrid.grid[t]=[];for(let e=0;e<this.tileGrid.size.X;++e)this.tileGrid.grid[t][e]=new a.Z(0,0,0,0)}this.wallGrid=[];for(let t=0;t<this.tileGrid.size.Y;++t)this.wallGrid[t]=[]}isTileCoordinatesOnGrid(t,e){return 0<=t&&t<this.tileGrid.size.X&&0<=e&&e<this.tileGrid.size.y}isScreenCoordinatesOnGrid(t){let e=this.getTileCoordinateFromScreenCoordinate(t);return this.isTileCoordinatesOnGrid(e.X,e.Y)}getTile(t,e){return console.assert(this.isTileCoordinatesOnGrid(t,e)),this.tileGrid.grid[e][t]}setTileColor(t,e,i,n){console.assert(this.isTileCoordinatesOnGrid(t,e)),console.assert(i instanceof s.Z);let o=this.getTile(t,e);o.color=i,o.alpha=n}resetTileColor(t,e){this.setTileColor(t,e,new s.Z(0,0,0),0)}resetAllTiles(){r.Z.goalTilePosition.X=r.Z.startingTilePosition.X=-1,r.Z.goalTilePosition.Y=r.Z.startingTilePosition.Y=-1;for(let t=0;t<this.tileGrid.size.Y;++t)for(let e=0;e<this.tileGrid.size.X;++e){let i=this.tileGrid.grid[t][e];i.type="blank",i.hasIcon&&i.removeIcon(),this.resetTileColor(e,t)}}resetWallTilesOnly(){for(let t=0;t<this.tileGrid.size.Y;++t)for(let e=0;e<this.tileGrid.size.X;++e){let i=this.tileGrid.grid[t][e];"wall"!==i.type&&"weight"!==i.type||(i.type="blank",i.hasIcon&&i.removeIcon(),this.resetTileColor(e,t))}}drawGridLines(){let t=r.Z.SCREEN_CENTER.x+Math.floor(r.Z.centerOffset.x)+.5,e=r.Z.SCREEN_CENTER.y+Math.floor(r.Z.centerOffset.y)+.5;r.Z.ctx.lineWidth=1,r.Z.ctx.strokeStyle=c,r.Z.ctx.beginPath(),r.Z.ctx.moveTo(t,0),r.Z.ctx.lineTo(t,r.Z.height),r.Z.ctx.moveTo(0,e),r.Z.ctx.lineTo(r.Z.width,e);for(let e=t+r.Z.TILE_SIZE+1;e<r.Z.width;e+=r.Z.TILE_SIZE+1)r.Z.ctx.moveTo(e,0),r.Z.ctx.lineTo(e,r.Z.height);for(let e=t-r.Z.TILE_SIZE-1;e>=0;e-=r.Z.TILE_SIZE+1)r.Z.ctx.moveTo(e,0),r.Z.ctx.lineTo(e,r.Z.height);for(let t=e+r.Z.TILE_SIZE+1;t<r.Z.height;t+=r.Z.TILE_SIZE+1)r.Z.ctx.moveTo(0,t),r.Z.ctx.lineTo(r.Z.width,t);for(let t=e-r.Z.TILE_SIZE-1;t>=0;t-=r.Z.TILE_SIZE+1)r.Z.ctx.moveTo(0,t),r.Z.ctx.lineTo(r.Z.width,t);r.Z.ctx.stroke(),r.Z.ctx.strokeStyle="#F68F8F",r.Z.ctx.beginPath(),r.Z.ctx.moveTo(t-r.Z.TILE_SIZE,e),r.Z.ctx.lineTo(t+r.Z.TILE_SIZE,e),r.Z.ctx.moveTo(t,e-r.Z.TILE_SIZE),r.Z.ctx.lineTo(t,e+r.Z.TILE_SIZE),r.Z.ctx.stroke(),r.Z.ctx.closePath()}drawBorder(){r.Z.ctx.fillStyle=t,this.calcCorners(r.Z.centerOffset);let e=this.topLeftCorner.X,i=this.bottomRightCorner.X+1,n=this.topLeftCorner.Y,o=this.bottomRightCorner.Y+1;e>0?r.Z.ctx.fillRect(0,0,e,r.Z.height):i<r.Z.width&&r.Z.ctx.fillRect(i,0,r.Z.width-i,r.Z.height),n>0?r.Z.ctx.fillRect(0,0,r.Z.width,n):o<r.Z.height&&r.Z.ctx.fillRect(0,o,r.Z.width,r.Z.height-o)}drawTiles(){let t=this.getTileCoordinateFromScreenCoordinate(new l.Z(0,0)),e=this.getTileCoordinateFromScreenCoordinate(new l.Z(r.Z.width,r.Z.height)),i=Math.max(t.Y,0),n=Math.min(e.Y,this.tileGrid.size.Y-1),o=Math.max(t.X,0),s=Math.min(e.X,this.tileGrid.size.X-1);for(let t=i;t<=n;++t)for(let e=o;e<=s;++e){let i=this.tileGrid.grid[t][e],n=this.getScreenCoordinateFromTileCoordinate(new l.Z(e,t));r.Z.ctx.fillStyle=i.CSSColor,r.Z.ctx.fillRect(n.X+2,n.Y+2,r.Z.TILE_SIZE-4,r.Z.TILE_SIZE-4),i.hasIcon()&&r.Z.ctx.drawImage(i.getIcon(),n.X+r.Z.ICON_CORNER_OFFSET,n.Y+r.Z.ICON_CORNER_OFFSET)}}draw(){this.drawGridLines(),this.drawTiles(),this.drawBorder()}}n()}catch(t){n(t)}}),1)},208:(t,e,i)=>{i.d(e,{Z:()=>n}),console.log("Loader class woohoo");class n{static _isLoaded=!1;static async waitUntilLoad(){return new Promise((t=>{if(n._isLoaded)t();else{let e=0;const i=setInterval((()=>{"complete"===document.readyState?(clearInterval(i),console.log(`Loops needed before document completely loaded: ${e}`),n._isLoaded=!0,t()):(console.log("grid lc: ",getComputedStyle(document.body).getPropertyValue("--grid-line-color")),++e)}),10)}}))}}},297:(t,e,i)=>{i.d(e,{Z:()=>a});class n{value=null;next=null;prev=null;constructor(t){this.value=t}}class o{constructor(){this.length=0,this.front=null,this.back=null}addFront(t){let e=new n(t);0==this.length?(this.front=e,this.back=e):(e.next=this.front,this.front.prev=e,this.front=e),++this.length}addBack(t){if(0==this.length)this.addFront(t);else{let e=new n(t);e.prev=this.back,this.back.next=e,this.back=e,++this.length}}removeFront(){let t;if(console.assert(this.length>0),1==this.length)t=this.front.value,this.front=this.back=null;else{let e=this.front,i=e.next;t=e.value,e.next=null,i.prev=null,this.front=i}return--this.length,t}removeBack(){if(console.assert(this.length>0),1==this.length)return this.removeFront();{let t=this.back,e=t.prev,i=t.value;return t.prev=e.next=null,this.back=e,i}}getLength(){return this.length}}const s=1e3/30;class l{constructor(t){console.assert("string"==typeof t),this.timeElapsed=0,this.DELETE_TIME=3,this.documentReference=null}setDocumentReference(t){this.documentReference=t}elapseTime(t){var e;this.timeElapsed+=t,this.documentReference.style.opacity=0<=(e=this.timeElapsed)&&e<=4e3?1:e>4e3?Math.max(0,1/Math.pow(1500,2)*Math.pow(e-5500,2)):void 0}shouldBeDeleted(){return this.timeElapsed>=5500}}class a{static notificationTemplate=document.getElementById("notificationTemplate");static notificationContainer=document.getElementById("notificationContainer");static notificationDeque=new o;static containerHeight=notificationContainer.offsetHeight;static intervalConnection=null;constructor(){}static getNotificationCount(){return this.notificationDeque.length}static frameUpdate=()=>{let t=this.notificationDeque.front;for(;null!==t;)t.value.elapseTime(s),t=t.next;if(0==this.getNotificationCount())console.log("no more notifications, stopping updates: "+this.intervalConnection),clearInterval(this.intervalConnection),this.intervalConnection=null;else{let t=this.notificationDeque.front,e=t.value;e.shouldBeDeleted()&&(e=this.notificationDeque.removeFront(),e.documentReference.remove(),t=null)}};static shiftNotifications(){let t=10,e=this.notificationDeque.back;for(;null!==e;){let i=e.value;i.documentReference.style.bottom=`${t}px`,t+=10+i.documentReference.offsetHeight,e=e.prev}}static getTotalNotificationHeight(){let t=0,e=this.notificationDeque.front;for(;null!==e;)t+=10+e.value.documentReference.offsetHeight,e=e.next;return t}static removeOutOfContainerNotifications(){let t=this.getTotalNotificationHeight(),e=this.notificationDeque.front.value;t-(e.documentReference.offsetHeight+10)>=this.containerHeight&&(e=this.notificationDeque.removeFront(),e.documentReference.remove(),e=null)}static addNotification(t){console.assert("string"==typeof t);let e=new l(t);this.notificationDeque.addBack(e),e.documentReference=this.notificationTemplate.cloneNode(!0);let i=e.documentReference.children[0];e.documentReference.id=null,i.innerHTML=t,this.notificationContainer.appendChild(e.documentReference),a.removeOutOfContainerNotifications(),e.documentReference.classList.remove("hidden"),a.shiftNotifications(),null===this.intervalConnection&&(this.intervalConnection=setInterval(this.frameUpdate,s))}}},361:(t,e,i)=>{i.d(e,{Z:()=>E});let n=document.getElementById("mainToolbar"),o=document.getElementById("playButton"),s=document.getElementById("speedScaleButton"),l=document.getElementById("skipBackwardButton"),a=document.getElementById("skipForwardButton"),r=document.getElementById("markerButton"),c=document.getElementById("goalButton"),h=document.getElementById("wallButton"),u=document.getElementById("weightButton"),d=document.getElementById("infoButton"),g=document.getElementById("settingsButton"),p=document.getElementsByClassName("settings-prompt")[0],Z=p.querySelector(".close-prompt"),T=document.getElementById("clearButton"),m=document.body.querySelector(".clear-prompt"),f=m.querySelector(".close-prompt"),w=document.getElementById("clearWallsButton"),S=document.getElementById("clearEverythingButton");class E{static ctx;static virtualCanvas;static SCREEN_CENTER;static TILE_SIZE;static TILE_SIZE_WITH_BORDER;static FPS=60;static FRAME_TIMING=1e3/E.FPS;static ICON_SIZE=30;static ICON_CORNER_OFFSET;static CANVAS_SIZE;static MAX_OFFSET;static centerOffset;static currentMousePosition;static goalTilePosition;static startingTilePosition;static isMouseInViewport;static isHoldingRMB;static isHoldingMMB;static isHoldingLMB;static canvas;static mainToolbar=n;static buttons={playButton:o,speedScaleButton:s,skipBackwardButton:l,skipForwardButton:a,markerButton:r,goalButton:c,wallButton:h,weightButton:u,clearButton:T,settingsButton:g,infoButton:d,settingsCloseButton:Z,clearCloseButton:f,clearWallsButton:w,clearEverythingButton:S};static toolbarButtons={playButton:o,speedScaleButton:s,markerButton:r,goalButton:c,wallButton:h,weightButton:u,clearButton:T,settingsButton:g,infoButton:d};static windows={clearWindow:m,settingsWindow:p};static drawCenterReference(){E.ctx.strokeStyle="#A57400",E.ctx.beginPath(),E.ctx.moveTo(E.SCREEN_CENTER.getX()-10,E.SCREEN_CENTER.getY()),E.ctx.lineTo(E.SCREEN_CENTER.getX()+10,E.SCREEN_CENTER.getY()),E.ctx.moveTo(E.SCREEN_CENTER.getX(),E.SCREEN_CENTER.getY()-10),E.ctx.lineTo(E.SCREEN_CENTER.getX(),E.SCREEN_CENTER.getY()+10),E.ctx.stroke(),E.ctx.closePath()}static drawGridToCenterVector(){E.ctx.strokeStyle="#00B029",E.ctx.beginPath(),E.ctx.moveTo(E.SCREEN_CENTER.getX(),E.SCREEN_CENTER.getY()),E.ctx.lineTo(E.SCREEN_CENTER.getX()+E.centerOffset.getX(),E.SCREEN_CENTER.getY()+E.centerOffset.getY()),E.ctx.stroke(),E.ctx.closePath()}static isToolbarButton(t){for(const e in this.toolbarButtons)if(t===this.toolbarButtons[e])return!0}static isElementDescendantOf(t,e){for(;t&&t.parentElement;){if(t===e)return!0;t=t.parentElement}return!1}static isGoalTilePlaced(){let t=E.goalTilePosition;return E.virtualCanvas.isTileCoordinatesOnGrid(t.X,t.Y)}static isStartingTilePlaced(){let t=E.startingTilePosition;return E.virtualCanvas.isTileCoordinatesOnGrid(t.X,t.Y)}}},899:(t,e,i)=>{i.d(e,{Z:()=>n});class n{static ALGORITHMS={DIJKSTRA:0,A_STAR:1};static algorithm="Dijkstra";static playbackMode="Auto";static playbackSpeed=1;static setPlaybackMode(t){this.playbackMode=t}static getPlaybackMode(){return this.playbackMode}static setAlgorithm(t){this.algorithm=t}static getAlgorithm(){return this.algorithm}static cyclePlaybackSpeed(){this.playbackSpeed=this.playbackSpeed%2+.5}static getPlaybackSpeed(){return this.playbackSpeed}static getPlaybackSpeedLabel(){let t=this.getPlaybackSpeed().toString();return t.length>1?t+"x":`${t.charAt(0)}.0x`}static set(t,e){"algorithm"===t?n.setAlgorithm(e):"playbackMode"===t&&n.setPlaybackMode(e)}}},473:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(361);class o{constructor(){this.windowOpen=!1}enter(){n.Z.windows.clearWindow.classList.remove("hidden"),n.Z.buttons.clearButton.classList.add("active-button"),this.windowOpen=!0}exit(){n.Z.windows.clearWindow.classList.add("hidden"),n.Z.buttons.clearButton.classList.remove("active-button"),this.windowOpen=!1}handleButtonInput(t,e){"click"===e&&(t===n.Z.buttons.clearButton?this.windowOpen?this.exit():this.enter():t===n.Z.buttons.clearCloseButton||n.Z.isToolbarButton(t)?this.exit():t===n.Z.buttons.clearEverythingButton?(n.Z.virtualCanvas.resetAllTiles(),this.exit()):t===n.Z.buttons.clearWallsButton&&(n.Z.virtualCanvas.resetWallTilesOnly(),this.exit()))}toString(){return"ClearState"}handleMouseInput(t,e){}frameUpdate(){}}},90:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(899),o=i(361);class s{openButton=o.Z.buttons.settingsButton;closeButton=o.Z.buttons.settingsCloseButton;window=o.Z.windows.settingsWindow;constructor(){this.isWindowOpen=!1,this.isDropdownOpen=!1,this.currentOpenDropdown=null}enter(){this.window.classList.remove("hidden"),this.openButton.classList.add("active-button"),this.isWindowOpen=!0;let t=this.window.querySelectorAll(".dropdown");for(let e=0;e<t.length;++e){let i=t[e],o=i.dataset.setting,s=i.querySelector("div.active-dropdown-background"),l=i.querySelector("div.active-dropdown-value"),a=t[e].querySelector("div.dropdown-options-container"),r=a.querySelectorAll(".dropdown-option");s.onclick=()=>{if(0==this.isDropdownOpen&&null===this.currentOpenDropdown){this.isDropdownOpen=!0,this.currentOpenDropdown=o;let t=!1;a.classList.remove("hidden");for(let e=0;e<r.length;++e){let i=r[e];i.onclick=()=>{if(0==t){let e=i.dataset.value;t=!0,i.onclick=()=>{},a.classList.add("hidden"),l.innerHTML=e,n.Z.set(o,e),this.currentOpenDropdown=null,this.isDropdownOpen=!1,t=!1}}}}else if(1==this.isDropdownOpen&&o===this.currentOpenDropdown){for(let t=0;t<r.length;++t)r[t].onclick=()=>{};a.classList.add("hidden"),this.isDropdownOpen=!1,this.currentOpenDropdown=null}}}}exit(){if(this.isDropdownOpen&&null!==this.currentOpenDropdown){let t=this.window.querySelector(`.dropdown[data-setting=${this.currentOpenDropdown}]`).querySelector("div.dropdown-options-container"),e=t.querySelectorAll("div.dropdown-option");for(let t=0;t<e.length;++t)e[t].onclick=()=>{};t.classList.add("hidden"),this.isDropdownOpen=!1,this.currentOpenDropdown=null}this.window.classList.add("hidden"),this.openButton.classList.remove("active-button"),this.isWindowOpen=!1}handleButtonInput(t,e){"click"===e&&(t===this.openButton?this.isWindowOpen?this.exit():this.enter():(t===this.closeButton||o.Z.isToolbarButton(t))&&this.exit())}toString(){return"EditingSettingsState"}handleMouseInput(t,e){}frameUpdate(){}}},212:(t,e,i)=>{i.d(e,{Z:()=>n});class n{constructor(){}handleMouseInput(t,e){}handleButtonInput(t,e){}frameUpdate(){}toString(){return"IdleState"}}},632:(t,e,i)=>{i.d(e,{Z:()=>u});var n=i(361),o=i(925),s=i(413),l=i(977);function a(){if(n.Z.virtualCanvas.isTileCoordinatesOnGrid(n.Z.goalTilePosition.X,n.Z.goalTilePosition.Y)){n.Z.virtualCanvas.resetTileColor(n.Z.goalTilePosition.X,n.Z.goalTilePosition.Y);let t=n.Z.virtualCanvas.getTile(n.Z.goalTilePosition.X,n.Z.goalTilePosition.Y);t.removeIcon(),t.type="blank",n.Z.goalTilePosition.X=-1,n.Z.goalTilePosition.Y=-1}}const r=new s.Z(255,100,100),c=.2,h=.0001666666666666667*n.Z.FRAME_TIMING;class u{isPlacingGoalTile=!1;goalButton=n.Z.buttons.goalButton;constructor(){this.currentAlphaValue=c,this.alphaChangeDirection=1,this.goalTileIcon=new Image,this.goalTileIcon.src=l}enter(){this.currentAlphaValue=c,this.alphaChangeDirection=1,this.goalButton.classList.add("active-button"),this.isPlacingGoalTile=!0}exit(){this.goalButton.classList.remove("active-button"),this.isPlacingGoalTile=!1}handleButtonInput(t,e){"click"===e&&(t===this.goalButton?this.isPlacingGoalTile?this.exit():this.enter():n.Z.isToolbarButton(t)&&this.exit())}handleMouseInput(t,e){if("mousedown"===e){let e=document.elementFromPoint(t.clientX,t.clientY),i=n.Z.virtualCanvas;if(n.Z.isElementDescendantOf(e,n.Z.mainToolbar))return;let s=i.getTileCoordinateFromScreenCoordinate(new o.Z(t.clientX,t.clientY)),l=i.getTile(s.X,s.Y);0==t.button&&"blank"===l.type?(a(),n.Z.goalTilePosition=s,i.setTileColor(n.Z.goalTilePosition.X,n.Z.goalTilePosition.Y,r,.5),l.setIcon(this.goalTileIcon),l.type="goal"):2==t.button&&s.equals(n.Z.goalTilePosition)&&(a(),l.type="blank")}}frameUpdate(){let t=n.Z.virtualCanvas,e=t.getTileCoordinateFromScreenCoordinate(n.Z.currentMousePosition),i=t.getTile(e.X,e.Y),o=t.getScreenCoordinateFromTileCoordinate(e);if("blank"===i.type){this.currentAlphaValue+=this.alphaChangeDirection*h,this.currentAlphaValue>=c?(this.currentAlphaValue=c,this.alphaChangeDirection=-1):this.currentAlphaValue<=0&&(this.currentAlphaValue=0,this.alphaChangeDirection=1),n.Z.ctx.fillStyle=`rgba(${r.R},${r.G},${r.B},${this.currentAlphaValue})`,n.Z.ctx.fillRect(o.X+2,o.Y+2,n.Z.TILE_SIZE-4,n.Z.TILE_SIZE-4);let t=n.Z.ctx.globalAlpha;n.Z.ctx.globalAlpha=this.currentAlphaValue,n.Z.ctx.drawImage(this.goalTileIcon,o.X+n.Z.ICON_CORNER_OFFSET,o.Y+n.Z.ICON_CORNER_OFFSET),n.Z.ctx.globalAlpha=t}}toString(){return"PlacingGoalTileState"}}},566:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{Z:()=>Z});var o=i(361),s=i(413),l=i(671),a=i(925),r=i(847),c=t([l]);function h(){let t=o.Z.virtualCanvas,e=o.Z.startingTilePosition;if(t.isTileCoordinatesOnGrid(e.X,e.Y)){t.resetTileColor(e.X,e.Y);let i=t.getTile(e.X,e.Y);i.removeIcon(),i.type="blank",o.Z.startingTilePosition.X=-1,o.Z.startingTilePosition.Y=-1}}l=(c.then?(await c)():c)[0];const u=new s.Z(100,255,100),d=.5,g=.2,p=g/1200*o.Z.FRAME_TIMING;class Z{markerButton=o.Z.buttons.markerButton;placingTiles=!1;constructor(){this.startingTileIcon=new Image,this.startingTileIcon.src=r,this.currentAlphaValue=g,this.alphaChangeDirection=1}enter(){this.markerButton.classList.add("active-button"),this.currentAlphaValue=g,this.alphaChangeDirection=1,this.placingTiles=!0}exit(){this.markerButton.classList.remove("active-button"),this.placingTiles=!1}handleButtonInput(t,e){"click"===e&&(t===this.markerButton?this.placingTiles?this.exit():this.enter():o.Z.isToolbarButton(t)&&this.exit())}handleMouseInput(t,e){let i=new a.Z(t.clientX,t.clientY),n=document.elementFromPoint(i.X,i.Y),s=o.Z.virtualCanvas;if(!o.Z.isElementDescendantOf(n,o.Z.mainToolbar)&&"mousedown"===e){let e=s.getTileCoordinateFromScreenCoordinate(i),n=s.getTile(e.X,e.Y);0==t.button&&"blank"===n.type?(h(),o.Z.startingTilePosition=e,s.setTileColor(e.X,e.Y,u,d),n.setIcon(this.startingTileIcon),n.type="start"):2==t.button&&e.equals(o.Z.startingTilePosition)&&(h(),n.type="blank")}}frameUpdate(){let t=o.Z.virtualCanvas,e=t.getTileCoordinateFromScreenCoordinate(o.Z.currentMousePosition),i=t.getTile(e.X,e.Y),n=t.getScreenCoordinateFromTileCoordinate(e);if("blank"===i.type){this.currentAlphaValue+=this.alphaChangeDirection*p,this.currentAlphaValue>=g?(this.currentAlphaValue=g,this.alphaChangeDirection=-1):this.currentAlphaValue<=0&&(this.currentAlphaValue=0,this.alphaChangeDirection=1),o.Z.ctx.fillStyle=`rgba(${u.R},${u.G},${u.B},${this.currentAlphaValue})`,o.Z.ctx.fillRect(n.X+2,n.Y+2,o.Z.TILE_SIZE-4,o.Z.TILE_SIZE-4);let t=o.Z.ctx.globalAlpha;o.Z.ctx.globalAlpha=this.currentAlphaValue,o.Z.ctx.drawImage(this.startingTileIcon,n.X+o.Z.ICON_CORNER_OFFSET,n.Y+o.Z.ICON_CORNER_OFFSET),o.Z.ctx.globalAlpha=t}}toString(){return"PlacingStartingTileState"}}n()}catch(T){n(T)}}))},921:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{Z:()=>g});var o=i(361),s=i(413),l=i(671),a=i(925),r=t([l]);l=(r.then?(await r)():r)[0];const c=new s.Z(17,17,128),h=.5,u=.2,d=u/1200*o.Z.FRAME_TIMING;class g{wallButton=o.Z.buttons.wallButton;isPlacingWalls=!1;constructor(){this.currentAlphaValue=u,this.alphaChangeDirection=1,this.hoverColor=new s.Z(80,80,255),this.getCurrentHoverCSS=()=>`rgba(${this.hoverColor.R},${this.hoverColor.G},${this.hoverColor.B},${this.alphaValue})`}exit(){this.wallButton.classList.remove("active-button"),this.isPlacingWalls=!1}enter(){this.currentAlphaValue=u,this.alphaChangeDirection=1,this.wallButton.classList.add("active-button"),this.isPlacingWalls=!0}handleButtonInput(t,e){"click"===e&&(t===this.wallButton?this.isPlacingWalls?this.exit():this.enter():o.Z.isToolbarButton(t)&&this.exit())}handleMouseInput(t,e){let i=new a.Z(t.clientX,t.clientY),n=document.elementFromPoint(i.X,i.Y),s=o.Z.virtualCanvas;if(o.Z.canvas,!o.Z.isElementDescendantOf(n,o.Z.mainToolbar))if("mousedown"===e){if(s.isScreenCoordinatesOnGrid(i)){let e=s.getTileCoordinateFromScreenCoordinate(i),n=s.getTile(e.X,e.Y);0==t.button?"blank"===n.type&&(s.setTileColor(e.X,e.Y,c,h),n.type="wall"):2==t.button&&"wall"===n.type&&(s.resetTileColor(e.X,e.Y),n.type="blank")}}else if("mousemove"===e&&s.isScreenCoordinatesOnGrid(i)){let t=s.getTileCoordinateFromScreenCoordinate(i),e=s.getTile(t.X,t.Y);o.Z.isHoldingLMB&&"blank"===e.type?(e.type="wall",s.setTileColor(t.X,t.Y,c,h)):o.Z.isHoldingRMB&&"wall"===e.type&&!o.Z.isHoldingLMB&&(e.type="blank",s.resetTileColor(t.X,t.Y))}}frameUpdate(){let t=o.Z.virtualCanvas,e=t.getTileCoordinateFromScreenCoordinate(o.Z.currentMousePosition),i=t.getTile(e.X,e.Y),n=t.getScreenCoordinateFromTileCoordinate(e);"blank"===i.type&&(this.currentAlphaValue+=this.alphaChangeDirection*d,this.currentAlphaValue>=u?(this.currentAlphaValue=u,this.alphaChangeDirection=-1):this.currentAlphaValue<=0&&(this.currentAlphaValue=0,this.alphaChangeDirection=1),o.Z.ctx.fillStyle=`rgba(${c.R},${c.G},${c.B},${this.currentAlphaValue})`,o.Z.ctx.fillRect(n.X+2,n.Y+2,o.Z.TILE_SIZE-4,o.Z.TILE_SIZE-4))}toString(){return"PlacingWallsState"}}n()}catch(t){n(t)}}))},456:(t,e,i)=>{i.d(e,{Z:()=>h});var n=i(361),o=i(925),s=i(413),l=i(299);let a=new s.Z(80,80,80);const r=.1,c=8333333333333334e-20*n.Z.FRAME_TIMING;class h{isPlacingTiles=!1;weightButton=n.Z.buttons.weightButton;constructor(){this.currentAlphaValue=r,this.alphaChangeDirection=1,this.weightTileIcon=new Image,this.weightTileIcon.src=l}enter(){this.currentAlphaValue=r,this.alphaChangeDirection=1,this.weightButton.classList.add("active-button"),this.isPlacingTiles=!0}exit(){this.weightButton.classList.remove("active-button"),this.isPlacingTiles=!1}handleButtonInput(t,e){"click"===e&&(t===this.weightButton?this.isPlacingTiles?this.exit():this.enter():n.Z.isToolbarButton(t)&&this.exit())}handleMouseInput(t,e){let i=document.elementFromPoint(t.clientX,t.clientY),s=n.Z.virtualCanvas,l=new o.Z(t.clientX,t.clientY);if(!n.Z.isElementDescendantOf(i,n.Z.mainToolbar))if("mousedown"===e){if(s.isScreenCoordinatesOnGrid(l)){let e=s.getTileCoordinateFromScreenCoordinate(l),i=s.getTile(e.X,e.Y);0==t.button&&"blank"===i.type?(s.setTileColor(e.X,e.Y,a,.1),i.type="weight",i.setIcon(this.weightTileIcon)):2==t.button&&"weight"===i.type&&(s.resetTileColor(e.X,e.Y),i.type="blank",i.removeIcon())}}else if("mousemove"===e&&s.isScreenCoordinatesOnGrid(l)){let t=s.getTileCoordinateFromScreenCoordinate(l),e=s.getTile(t.X,t.Y);n.Z.isHoldingLMB&&"blank"===e.type?(s.setTileColor(t.X,t.Y,a,.1),e.type="weight",e.setIcon(this.weightTileIcon)):n.Z.isHoldingRMB&&!n.Z.isHoldingLMB&&"weight"===e.type&&(s.resetTileColor(t.X,t.Y),e.type="blank",e.removeIcon())}}frameUpdate(){let t=n.Z.virtualCanvas,e=t.getTileCoordinateFromScreenCoordinate(n.Z.currentMousePosition),i=t.getTile(e.X,e.Y);if(null===i)return;let o=t.getScreenCoordinateFromTileCoordinate(e);if("blank"===i.type){this.currentAlphaValue+=this.alphaChangeDirection*c,this.currentAlphaValue>=r?(this.currentAlphaValue=r,this.alphaChangeDirection=-1):this.currentAlphaValue<=0&&(this.currentAlphaValue=0,this.alphaChangeDirection=1),n.Z.ctx.fillStyle=`rgba(${a.R},${a.G},${a.B},${this.currentAlphaValue})`,n.Z.ctx.fillRect(o.X+2,o.Y+2,n.Z.TILE_SIZE-4,n.Z.TILE_SIZE-4);let t=n.Z.ctx.globalAlpha;n.Z.ctx.globalAlpha=this.currentAlphaValue,n.Z.ctx.drawImage(this.weightTileIcon,o.X+n.Z.ICON_CORNER_OFFSET,o.Y+n.Z.ICON_CORNER_OFFSET),n.Z.ctx.globalAlpha=t}}toString(){return"PlacingWeightTileState"}}},975:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{Z:()=>u});var o=i(361),s=i(899),l=i(671),a=(i(990),i(925)),r=(i(82),i(49)),c=i(891),h=t([l,r,c]);[l,r,c]=h.then?(await h)():h;class u{playButton=o.Z.buttons.playButton;skipForwardButton=o.Z.buttons.skipForwardButton;skipBackwardButton=o.Z.buttons.skipBackwardButton;constructor(){this.currentStep=-1,this.playing=!1,this.playbackTrack=null,this.playbackGrid=null}canEnterState(){return o.Z.isGoalTilePlaced()&&o.Z.isStartingTilePlaced()}skipForward(){null!==this.playbackTrack&&this.playbackTrack.stepForward()}skipBackward(){null!==this.playbackTrack&&this.playbackTrack.stepBackward()}enter(){this.currentStep=-1,this.playButton.classList.add("active-button"),null===this.playbackGrid&&(this.playbackGrid=new l.Z(o.Z.CANVAS_SIZE.X,o.Z.CANVAS_SIZE.Y));let t=new a.Z(o.Z.virtualCanvas.tileGrid.size.X,o.Z.virtualCanvas.tileGrid.size.Y);t.X=Math.floor(t.X/2),t.Y=Math.floor(t.Y/2);let e=null;switch(s.Z.getAlgorithm()){case"Dijkstra":e=new r.Z(o.Z.virtualCanvas);break;case"A*":e=new c.Z(o.Z.virtualCanvas);break;default:console.error("Invalid algorithm")}this.playbackTrack=e.createPlaybackTrack(),this.playbackTrack.setGrid(this.playbackGrid),"Step"===s.Z.getPlaybackMode()?(this.skipForwardButton.classList.remove("disabled-button"),this.skipBackwardButton.classList.remove("disabled-button"),this.skipForwardButton.onclick=()=>{this.skipForward()},this.skipBackwardButton.onclick=()=>{this.skipBackward()}):"Auto"===s.Z.getPlaybackMode()&&this.playbackTrack.play(),this.playing=!0}exit(){if(null!==this.playbackGrid){const t=this.playbackGrid.tileGrid.size.scale(1);for(let e=0;e<t.Y;++e)for(let i=0;i<t.X;++i)this.playbackGrid.resetTileColor(i,e)}this.playbackTrack.stop(),this.playbackTrack=null,"Step"===s.Z.getPlaybackMode()&&(this.skipForwardButton.classList.add("disabled-button"),this.skipBackwardButton.classList.add("disabled-button"),this.skipBackwardButton.onclick=null,this.skipForwardButton.onclick=null),this.playButton.classList.remove("active-button"),this.playing=!1}handleButtonInput(t,e){"click"===e&&(t===this.playButton?this.playing?this.exit():this.enter():o.Z.isToolbarButton(t)&&this.exit())}handleMouseInput(t,e){}frameUpdate(){this.playbackGrid.drawTiles()}toString(){return"PlayingState"}}n()}catch(t){n(t)}}))},990:(t,e,i)=>{new(i(413).Z)(210,136,232)},254:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(413);class o{calculateCSSColor(){this._CSSColor=`rgba(${this.color.R},${this.color.G},${this.color.B},${this._alpha})`}constructor(t,e,i,o){this._color=new n.Z(t,e,i),this._alpha=o,this.calculateCSSColor(),this._hasIcon=!1,this._icon=null,this._type="blank"}set color(t){this._color=t,this.calculateCSSColor()}get color(){return this._color}set alpha(t){this._alpha=t,this.calculateCSSColor()}get alpha(){return this._alpha}get CSSColor(){return this._CSSColor}set type(t){this._type=t}get type(){return this._type}hasIcon(){return this._hasIcon}setIcon(t){console.assert(t instanceof Image),this._hasIcon=!0,this._icon=t}getIcon(){return this._icon}removeIcon(){this._hasIcon=!1,this._icon=null}}},956:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{Z:()=>g});var o=i(212),s=i(473),l=i(90),a=i(921),r=i(632),c=i(456),h=i(566),u=i(975),d=t([a,h,u]);[a,h,u]=d.then?(await d)():d;class g{static idleState=new o.Z;static clearState=new s.Z;static editingSettingsState=new l.Z;static placingWallsState=new a.Z;static placingGoalTileState=new r.Z;static placingWeightTilesState=new c.Z;static placingStartingTileState=new h.Z;static playingState=new u.Z;currentState=null;constructor(){this.currentState=g.idleState}handleButtonInput(t,e,i=this.currentState){console.log(`${this.currentState.toString()} -> ${i.toString()}`),this.currentState.handleButtonInput(t,e),i!==this.currentState&&(this.currentState=i,this.currentState.handleButtonInput(t,e))}handleMouseInput(t,e){this.currentState.handleMouseInput(t,e)}frameUpdate(){this.currentState.frameUpdate()}}n()}catch(t){n(t)}}))},925:(t,e,i)=>{i.d(e,{Z:()=>n});class n{constructor(t=0,e=0){return this.x=t,this.y=e,this}add(t){return console.assert(t instanceof n),new n(this.x+t.x,this.y+t.y)}sub(t){return console.assert(t instanceof n),new n(this.x-t.x,this.y-t.y)}scale(t){return new n(this.x*t,this.y*t)}dist(t){console.assert(t instanceof n);let e=t.sub(this);return Math.sqrt(e.x*e.x+e.y*e.y)}equals(t){return t instanceof n&&this.x==t.x&&this.y==t.y}get X(){return this.x}get Y(){return this.y}set X(t){this.x=t}set Y(t){this.y=t}getX(){return this.x}getY(){return this.y}setX(t){this.x=t}setY(t){this.y=t}}},847:(t,e,i)=>{t.exports=i.p+"7ca0eb57914c03ad3806.png"},977:(t,e,i)=>{t.exports=i.p+"c21a474c0c9128705ed1.png"},299:(t,e,i)=>{t.exports=i.p+"8b5eab56e33d8a097573.png"}},s={};function l(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={exports:{}};return o[t](i,i.exports,l),i.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&!t.d&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},l.a=(o,s,l)=>{var a;l&&((a=[]).d=1);var r,c,h,u=new Set,d=o.exports,g=new Promise(((t,e)=>{h=e,c=t}));g[e]=d,g[t]=t=>(a&&t(a),u.forEach(t),g.catch((t=>{}))),o.exports=g,s((o=>{var s;r=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var s=[];s.d=0,o.then((t=>{l[e]=t,n(s)}),(t=>{l[i]=t,n(s)}));var l={};return l[t]=t=>t(s),l}}var a={};return a[t]=t=>{},a[e]=o,a})))(o);var l=()=>r.map((t=>{if(t[i])throw t[i];return t[e]})),c=new Promise((e=>{(s=()=>e(l)).r=0;var i=t=>t!==a&&!u.has(t)&&(u.add(t),t&&!t.d&&(s.r++,t.push(s)));r.map((e=>e[t](i)))}));return s.r?c:l()}),(t=>(t?h(g[i]=t):c(d),n(a)))),a&&(a.d=0)},l.d=(t,e)=>{for(var i in e)l.o(e,i)&&!l.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),l.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;l.g.importScripts&&(t=l.g.location+"");var e=l.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=t})(),l(225)})();